<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <!-- <meta name="viewport" content="width=device-width, initial-scale=1.0"> -->
    <title>原生JS轮播图</title>
    <style>
        /* 轮播图容器：限定宽度高度，溢出隐藏 */
        .carousel {
            width: 800px;
            height: 400px;
            margin: 50px auto;
            position: relative;
            overflow: hidden;
            border: 1px solid #ccc;
        }

        /* 轮播图列表：横向排列所有图片 */
        .carousel-list {
            display: flex;
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
            list-style: none;
            /* 过渡动画：滑动更丝滑 */
            transition: transform 0.5s ease;
        }

        /* 轮播项：每个项占满容器 */
        .carousel-item {
            width: 100%;
            height: 100%;
            flex-shrink: 0;
            /* 禁止收缩，保证每个项宽度一致 */
        }

        .carousel-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            /* 图片等比填充，不拉伸 */
        }

        /* 左右切换按钮 */
        .carousel-btn {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 40px;
            height: 40px;
            line-height: 40px;
            text-align: center;
            background-color: rgba(0, 0, 0, 0.5);
            color: white;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            font-size: 20px;
            z-index: 10;
            /* 保证按钮在图片上方 */
        }

        .prev-btn {
            left: 10px;
        }

        .next-btn {
            right: 10px;
        }

        /* 指示器（小圆点） */
        .carousel-indicators {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 10px;
            padding: 0;
            margin: 0;
            list-style: none;
        }

        .indicator-item {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.5);
            cursor: pointer;
        }

        /* 激活的指示器样式 */
        .indicator-item.active {
            background-color: white;
        }
    </style>
</head>

<body>
    <div class="carousel" id="carousel">
        <!-- 轮播图列表 -->
        <ul class="carousel-list" id="carouselList">
            <li class="carousel-item">
                <img src="https://picsum.photos/800/400?random=1" alt="轮播图1">
            </li>
            <li class="carousel-item">
                <img src="https://picsum.photos/800/400?random=2" alt="轮播图2">
            </li>
            <li class="carousel-item">
                <img src="https://picsum.photos/800/400?random=3" alt="轮播图3">
            </li>
        </ul>

        <!-- 左右切换按钮 -->
        <button class="carousel-btn prev-btn" id="prevBtn">‹</button>
        <button class="carousel-btn next-btn" id="nextBtn">›</button>

        <!-- 指示器 -->
        <ul class="carousel-indicators" id="indicators">
            <li class="indicator-item active" data-index="0"></li>
            <li class="indicator-item" data-index="1"></li>
            <li class="indicator-item" data-index="2"></li>
        </ul>
    </div>

    <script>
        // 获取DOM元素
        const carousel = document.getElementById('carousel');
        const carouselList = document.getElementById('carouselList');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const indicators = document.getElementById('indicators').querySelectorAll('.indicator-item');

        // 轮播图配置
        const itemCount = indicators.length; // 轮播图数量
        const itemWidth = carousel.offsetWidth; // 每个轮播项的宽度（等于容器宽度）
        let currentIndex = 0; // 当前显示的轮播图索引
        let timer = null; // 自动播放定时器

        // 1. 切换轮播图的核心函数
        function switchCarousel(index) {
            // 边界判断：如果索引超出范围，回到第一个/最后一个
            if (index < 0) {
                currentIndex = itemCount - 1;
            } else if (index >= itemCount) {
                currentIndex = 0;
            } else {
                currentIndex = index;
            }

            // 移动轮播图列表：核心是修改transform的X轴偏移
            carouselList.style.transform = `translateX(-${currentIndex * itemWidth}px)`;

            // 更新指示器样式
            updateIndicators();
        }

        // 2. 更新指示器激活状态
        function updateIndicators() {
            indicators.forEach((item, index) => {
                if (index === currentIndex) {
                    item.classList.add('active');
                } else {
                    item.classList.remove('active');
                }
            });
        }

        // 3. 自动播放函数
        function autoPlay() {
            timer = setInterval(() => {
                switchCarousel(currentIndex + 1);
            }, 3000); // 每3秒切换一次
        }

        // 4. 绑定事件
        // 左按钮点击：上一张
        prevBtn.addEventListener('click', () => {
            switchCarousel(currentIndex - 1);
        });

        // 右按钮点击：下一张
        nextBtn.addEventListener('click', () => {
            switchCarousel(currentIndex + 1);
        });

        // 指示器点击：切换到对应索引的轮播图
        indicators.forEach((item) => {
            item.addEventListener('click', () => {
                const index = parseInt(item.dataset.index);
                switchCarousel(index);
            });
        });

        // 鼠标悬停：暂停自动播放
        carousel.addEventListener('mouseenter', () => {
            clearInterval(timer);
        });

        // 鼠标离开：恢复自动播放
        carousel.addEventListener('mouseleave', () => {
            autoPlay();
        });

        // 初始化：启动自动播放
        autoPlay();
    </script>
</body>

</html>